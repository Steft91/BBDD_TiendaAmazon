<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/libros.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
 
    <title>Libros</title>
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }

        .product-details {
            max-width: 900px;
            margin: 50px auto;
            padding: 30px;
            background:rgb(180, 188, 231);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product-details img {
            max-width: 350px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .product-details h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .product-details p {
            font-size: 1rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .product-details .product-price {
            font-size: 2rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        .product-details .product-stock {
            font-size: 1.2rem;
            color: #17a2b8;
            margin-bottom: 10px;
        }

        .product-details .product-discount {
            font-size: 1.2rem;
            color: #dc3545;
            margin-bottom: 10px;
        }

        .product-details .star-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .product-details .star-rating span {
            color: #6c757d;
            font-size: 1rem;
        }

        .provider-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            width: 100%;
        }

        .provider-info h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .product-details button {
            margin-top: 20px;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <input type="checkbox" id="modoOscuro" autofill="false">
    <label for="modoOscuro" class="modoOscuroInterruptor">üåô</label>
    <header>
        <nav>
            <a href="index.html">
                <figure class="logo">
                    <img src="/static/img/logo.png" height="60" alt="Logo">
                </figure>
            </a>
            <div class="links">
                <a href="{{ url_for('home') }}">Inicio</a>
                <a href="{{ url_for('libreria') }}">Cat√°logo</a>
                <a href="{{ url_for('contacto') }}">Contacto</a>
            </div>
            <div class="acciones">
                <a href="{{ url_for('login') }}" class="login">Iniciar sesi√≥n</a>
                <a href="{{ url_for('carrito') }}" class="carrito">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span>1</span>
                </a>
            </div>
        </nav>
    </header>
    <section class="contenedor"> 
        <main>
            <div class="product-details">
                <img id="productImage" src="" alt="Imagen del producto">
                <h1 id="productName"></h1>
                <p id="productDescription"></p>
                <p class="product-price" id="productPrice"></p>
                <p class="product-stock" id="productStock"></p>
                <p class="product-discount" id="productDiscount"></p>
                <div class="star-rating" id="productRating">
                    <span id="numericRating"></span>
                </div>
        
                <div class="provider-info">
                    <h3>Informaci√≥n del Proveedor</h3>
                    <p id="providerName"></p>
                    <p id="providerContact"></p>
                    <p id="providerAddress"></p>
                </div>
        
                <button class="btn btn-primary" id="editButton">Editar Producto</button>
            </div>
        
    
            <button class="btn btn-primary" id="editButton">Editar Producto</button>
        </div>
            
        </main>
        

        <footer>
            <section class="infoFooter">
                <section class="logoFooter">
                    <img src="/static/img/logo.png" alt="logo" class="fotoFooter">
                    <h2>Simply Lovely</h2>
                    <p> <i class="fa-solid fa-map-pin"></i> Moreno Bellido #200 y Av. Amazonas </p>
                    <p> <i class="fa-solid fa-phone"></i> +593 998765412</p>
                    <p><i class="fa-solid fa-envelope"></i><a href="mailto:elbosquedeloslibros@libreria.com">simplyLovely@tienda.com</a></p>
                </section>
                <section class="infoDerecha">
                    <section class="redesSociales">
                        <a href="https://www.facebook.com/?locale=es_LA" class="icono"><img src="/static/img/facebook.png" alt="Facebook" ></a>
                        <a href="https://www.instagram.com/" class="icono"><img src="/static/img/Instagram.webp" alt="Ig" ></a>
                        <a href="https://twitter.com/?lang=es" class="icono"><img src="/static/img/x.jpg" alt="X" ></a>
                    </section>  
                    &copy; Tienda Digital Simply Lovely
                    <p><i class="fa-solid fa-people-group"></i>Hecho por el Grupo 3</p>              
                </section>
            </section>
        </footer>
        
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const producto = JSON.parse(sessionStorage.getItem('productoSeleccionado'));
            const proveedor = JSON.parse(sessionStorage.getItem('proveedorSeleccionado')); // Suponiendo que el proveedor tambi√©n se almacena

            if (!producto) {
                alert('No se encontr√≥ el producto.');
                window.location.href = '/'; // Redirigir a la p√°gina principal si no hay datos
                return;
            }

            // Mostrar informaci√≥n del producto
            document.getElementById('productImage').src = producto.imagen;
            document.getElementById('productName').textContent = producto.nombre;
            document.getElementById('productDescription').textContent = producto.descripcion;
            document.getElementById('productPrice').textContent = `Precio: $${producto.precio}`;
            document.getElementById('productStock').textContent = `Stock disponible: ${producto.stock}`;
            document.getElementById('productDiscount').textContent = `Descuento: ${producto.descuento}%`;

            // Mostrar calificaci√≥n con estrellas y valor num√©rico
            const starRatingElement = document.getElementById('productRating');
            const numericRatingElement = document.getElementById('numericRating');

            const roundedRating = Math.round(producto.calificacion * 2) / 2; // Redondear a 0.5 m√°s cercano
            const fullStars = Math.floor(roundedRating); // Estrellas llenas
            const halfStar = roundedRating % 1 !== 0; // Media estrella
            const emptyStars = 5 - Math.ceil(roundedRating); // Estrellas vac√≠as

            starRatingElement.innerHTML =
                '‚òÖ'.repeat(fullStars) +
                (halfStar ? '‚òÜ' : '') +
                '‚òÜ'.repeat(emptyStars);

            numericRatingElement.textContent = `(${producto.calificacion.toFixed(1)})`;

            // Mostrar informaci√≥n del proveedor (si est√° disponible)
            if (proveedor) {
                document.getElementById('providerName').textContent = `Nombre: ${proveedor.nombre}`;
                document.getElementById('providerContact').textContent = `Contacto: ${proveedor.contacto}`;
                document.getElementById('providerAddress').textContent = `Direcci√≥n: ${proveedor.direccion}`;
            } else {
                document.querySelector('.provider-info').innerHTML = '<p>No se encontr√≥ informaci√≥n del proveedor.</p>';
            }

            // Configurar bot√≥n de edici√≥n
            document.getElementById('editButton').addEventListener('click', () => {
                window.location.href = `/editarProducto.html?id=${producto.id_producto}`;
            });
        });
      </script>
</body>
</html>